<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electronics - ElectronicsHub</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="activity-tracker.css">
</head>
<body>
    <header>
        <nav>
            <div class="container nav-container">
                <a href="index.html" class="logo">ElectronicsHub</a>
                <div class="nav-links">
                    <a href="index.html">Home</a>
                    <a href="electronicsproducts.html">Electronics</a>
                    <a href="cart.html" class="cart-icon">
                        Cart
                        <span class="cart-count">0</span>
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container">
        <section class="products-header">
            <h1>Our Electronics</h1>
            <div class="filters">
                <select id="category-filter">
                    <option value="all">All Categories</option>
                    <option value="audio">Audio</option>
                    <option value="wearables">Wearables</option>
                    <option value="accessories">Accessories</option>
                </select>
                <select id="sort-filter">
                    <option value="default">Sort by: Featured</option>
                    <option value="price-low">Price: Low to High</option>
                    <option value="price-high">Price: High to Low</option>
                    <option value="name">Name: A to Z</option>
                </select>
            </div>
        </section>

        <div id="products-grid" class="products-grid">
            <!-- Products will be dynamically loaded here -->
        </div>
    </main>

    <!-- IMPORTANT: Load scripts in correct order -->
    <script src="cart.js"></script>
    <script src="activity-tracker.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            loadProducts();
            setupFilters();
            updateCartCount();
        });

        const products = [
            {
                id: 'p1',
                name: 'Premium Wireless Headphones',
                price: 99.99,
                category: 'audio',
                image: 'https://m.media-amazon.com/images/I/612TMuDXB0L._AC_SL1500_.jpg',
                description: 'High-quality wireless headphones with noise cancellation.'
            },
            {
                id: 'p2',
                name: 'Smart Fitness Watch',
                price: 149.99,
                category: 'wearables',
                image: 'https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400',
                description: 'Track your fitness goals with this advanced smartwatch.'
            },
            {
                id: 'p3',
                name: 'Portable Bluetooth Speaker',
                price: 79.99,
                category: 'audio',
                image: 'https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=400',
                description: 'Powerful and portable speaker for your outdoor adventures.'
            },
            {
                id: 'p4',
                name: 'True Wireless Earbuds',
                price: 129.99,
                category: 'audio',
                image: 'https://images.unsplash.com/photo-1590658268037-6bf12165a8df?w=400',
                description: 'Compact and comfortable wireless earbuds for everyday use.'
            },
            {
                id: 'p5',
                name: '20000mAh Power Bank',
                price: 49.99,
                category: 'accessories',
                image: 'https://images.unsplash.com/photo-1609091839311-d5365f9ff1c5?w=400',
                description: 'High-capacity power bank for all your charging needs.'
            },
            {
                id: 'p6',
                name: 'Fast Wireless Charger',
                price: 39.99,
                category: 'accessories',
                image: 'https://m.media-amazon.com/images/I/61jrstcmKPL._AC_SL1500_.jpg',
                description: 'Qi-compatible wireless charger for quick and easy charging.'
            }
        ];

        function loadProducts(filteredProducts = products) {
            const grid = document.getElementById('products-grid');
            grid.innerHTML = '';

            filteredProducts.forEach(product => {
                const card = document.createElement('div');
                card.className = 'product-card';
                card.innerHTML = `
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    <div class="product-info">
                        <h3 class="product-title">${product.name}</h3>
                        <p class="product-price">$${product.price.toFixed(2)}</p>
                        <p class="product-category">${product.category}</p>
                        <div class="product-actions">
                            <a href="electronicproduct.html" class="btn btn-secondary">View Details</a>
                            <button onclick="addToCart(${JSON.stringify(product).replace(/"/g, '&quot;')})" class="btn btn-primary">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function setupFilters() {
            const categoryFilter = document.getElementById('category-filter');
            const sortFilter = document.getElementById('sort-filter');

            function applyFilters() {
                let filtered = [...products];

                // Apply category filter
                if (categoryFilter.value !== 'all') {
                    filtered = filtered.filter(
                        product => product.category === categoryFilter.value
                    );
                }

                // Apply sort filter
                switch (sortFilter.value) {
                    case 'price-low':
                        filtered.sort((a, b) => a.price - b.price);
                        break;
                    case 'price-high':
                        filtered.sort((a, b) => b.price - a.price);
                        break;
                    case 'name':
                        filtered.sort((a, b) => a.name.localeCompare(b.name));
                        break;
                }

                loadProducts(filtered);
            }

            categoryFilter.addEventListener('change', applyFilters);
            sortFilter.addEventListener('change', applyFilters);
        }

        function addToCart(product) {
            cart.addToCart(product);
            showNotification(`${product.name} added to cart!`);
            updateCartCount();
        }

        function updateCartCount() {
            const cartItems = cart.getCart();
            const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
            document.querySelector('.cart-count').textContent = totalItems;
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #10b981;
                color: white;
                padding: 15px 25px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 10000;
                opacity: 0;
                transform: translateY(-20px);
                transition: all 0.3s ease;
            `;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.opacity = '1';
                notification.style.transform = 'translateY(0)';
            }, 100);

            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateY(-20px)';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
    </script>
</body>
</html>